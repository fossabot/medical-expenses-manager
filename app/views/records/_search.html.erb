<%= form_with(model: @record, url: records_search_path, method: :get,
              local: true, id: :search_record_form) do |form| %>
  <button class="btn btn-primary" type="button" data-toggle="collapse"
          data-target="#collapseSearch" aria-expanded="true" aria-controls="collapseSearch">
    検索フォーム
  </button>
  <div class="container collapse in" id="collapseSearch">
    <div class="row">
      <div class="form-group">
        <div class="col-xs-2">
          <%= form.label :from_date, Record.human_attribute_name(:date) %>
        </div>
        <div class="input-group date col-xs-3 date-picker">
          <%= form.text_field :from_date, class: 'form-control' %>
          <span class="input-group-addon">
            <span class="glyphicon glyphicon-calendar"></span>
          </span>
        </div>
        <div class="col-xs-1 text-center">～</div>
        <div class="input-group date col-xs-3 date-picker">
          <%= form.text_field :to_date, class: 'form-control' %>
          <span class="input-group-addon">
            <span class="glyphicon glyphicon-calendar"></span>
          </span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="form-group">
        <div class="col-sm-2 col-xs-2">
          <%= form.label :name, Person.human_attribute_name(:name) %>
        </div>
        <div class="col-sm-2 col-xs-10">
          <%= form.select :name, Person.objects_for_select,
                         {include_blank: true}, class: 'form-control' %>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-2 col-xs-4">
          <%= form.label :division_type, Division.model_name.human %>
        </div>
        <div class="col-sm-2 col-xs-8">
          <%= form.select :division_type, Division.division_names.invert,
                         {include_blank: true}, class: 'form-control division_type' %>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-2 col-xs-2">
          <%= form.label :division_name, Division.human_attribute_name(:name) %>
          <%= hidden_field_tag 'division[default_id]', @record.division_id %>
        </div>
        <div class="col-sm-2 col-xs-10">
          <%= hidden_field_tag 'division[action_name]', controller.action_name %>
          <div id="division_id_selector"><%= t('helpers.notice.loading') %></div>
        </div>
      </div>
    </div>
    <%= button_tag 'リセット', type: :button, id: 'reset_search',
                   class: 'btn btn-secondary' %>
    <%= form.submit :検索, class: 'btn btn-success', name: nil %>
  </div>
<% end %>

<script>
  $('.date-picker').datetimepicker({
    format: 'YYYY-MM-DD',
    locale: 'ja'
  });
</script>

<script>

</script>