<%= paginate records %>
<table class='table table-bordered table-hover table-striped'>
  <thead>
  <tr>
    <th><%= Record.human_attribute_name :date %></th>
    <th><%= Person.human_attribute_name :name %></th>
    <th><%= Division.model_name.human %></th>
    <th><%= Division.human_attribute_name :name %></th>
    <th><%= Record.human_attribute_name :cost %></th>
  </tr>
  </thead>

  <tbody>
  <% records.each do |r| %>
    <tr>
      <td><%= link_to l(r.date), record_path(r) %></td>
      <td><%= r.person.name %></td>
      <td><%= r.division.model_name.human %></td>
      <td><%= r.division.name %></td>
      <td><%= r.cost.to_s(:currency) %></td>
    </tr>
  <% end %>
  <% if controller.action_name == 'search' %>
    <tr>
      <th colspan="4">合計</th>
      <th><%= records.except(:limit, :offset).pluck(:cost).sum.to_s(:currency) %></th>
    </tr>
  <% end %>
  </tbody>
</table>
<%= paginate records %>
